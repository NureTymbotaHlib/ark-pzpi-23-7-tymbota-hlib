Міністерство освіти і науки України
Харківський національний університет радіоелектроніки
Кафедра програмної інженерії



Звіт
з лабораторної роботи №5
з дисципліни «Аналіз та рефакторінг коду»
на тему: «Розгортання програмної системи та демонстрація її роботи»






Виконав:                                                                      Перевірив:
ст. гр. ПЗПІ 23-7                                                         Дашенков Д. С.
Тимбота Гліб Олексійович                                             
                                                                       






Харків 2025
	5.1 Мета роботи 
     Набути практичних навичок розгортання програмної системи, налаштування серверних та клієнтських компонентів, перевірки працездатності, а також демонстрації реалізованої функціональності відповідно до Vision & Scope.
     5.2 Хід роботи
     5.2.1 Використання MongoDB у розгорнутій системі
     У нашій реалізації як сховище даних використовується MongoDB, а доступ до неї організовано через mongoose. Підключення виконується під час старту застосунку за рядком з’єднання, який передається змінною середовища MONGODB_URI. Це дозволяє не зберігати конфіденційні дані в коді, а також забезпечує однакову роботу локально і в хмарі. У базі даних зберігаються доменні дані системи автострахування (зокрема клієнти, транспортні засоби, поліси, платежі, страхові випадки), а також телеметричні події від IoT-клієнта і системні налаштування, які впливають на обробку даних. Коректність інтеграції з БД підтверджено тим, що після розгортання й виконання запитів через Swagger створені/отримані об’єкти стабільно повертаються API, а дані не втрачаються між перезапусками сервісу.

Рисунок 5.1 – БД у MongoDB
     5.2.3 Розгортання серверної частини у хмарному середовищі
     Серверну частину системи розгорнуто на платформі Render як Web Service із підключенням до репозиторію GitHub. Для запуску використано стандартну команду npm start, а параметри середовища (зокрема MONGODB_URI) задано у налаштуваннях сервісу. Оскільки Render надає порт через змінну середовища, у застосунку передбачено запуск на process.env.PORT, що забезпечує коректну роботу в прод-середовищі. Після завершення деплою виконано перевірку працездатності за допомогою health-check endpoint (наприклад, GET /api/health) та перевірено доступність документації й інтерактивного тестування через Swagger UI за маршрутом /api/docs. 
Посилання: https://auto-insurance-server.onrender.com/api/health  
https://auto-insurance-server.onrender.com/api/docs/#/. 

Рисунок 5.2 – Логи у Render

Рисунок 5.3 – Swagger UI у прод-середовищі
     5.2.3 Розгортання та налаштування IoT-клієнта і демонстрація взаємодії з сервером
     IoT-складову системи продемонстровано через симуляцію ESP32 у середовищі Wokwi. IoT-клієнт виконує підключення до мережі Wi-Fi у симуляторі, формує телеметричні дані у форматі JSON та надсилає їх на розгорнутий бекенд через HTTP POST-запит на endpoint /api/telemetry-events. У налаштуваннях IoT-клієнта використано адресу сервера (публічний Render URL), а також параметри події, що дозволяють імітувати різні режими руху та «інциденти» (наприклад, швидкість і ознаку impact). Під час демонстрації на стороні IoT у Serial Monitor фіксується результат запиту: відображається код відповіді сервера та тіло відповіді, що підтверджує прийом даних. На стороні сервера коректність взаємодії підтверджується повторною перевіркою через API: у Swagger виконується запит читання подій телеметрії, і серед результатів присутня щойно створена подія з відповідними значеннями полів.
     Сервер не тільки приймає дані, а й застосовує бізнес-правила до телеметрії. Зокрема, критичність події (severity) визначається на основі порогового значення швидкості, яке зберігається у системних налаштуваннях (наприклад, impactSpeedThreshold). При однакових вхідних даних класифікація події на сервері змінюється відповідно до нового порога, а це підтверджує коректну роботу «налаштування → обробка → збереження → перевірка». Додатково для перевірки стабільності IoT-взаємодії виконується серія надсилань телеметрії з інтервалом, після чого кількість подій у відповіді API зростає, а сервіс не завершує роботу аварійно.

Рисунок 5.4 – Схема підключення елементів IoT-клієнта у Wokwi (ESP32, потенціометр, кнопка)

Рисунок 5.5 – Результат HTTP POST телеметрії на сервер (HTTP 201, подію створено)

     5.3 Висновки
 	У ході лабораторної роботи виконано розгортання серверної частини системи автострахування у хмарному середовищі Render та налаштовано підключення до MongoDB через змінні середовища. Перевірено доступність і коректність роботи API у прод-середовищі через Swagger UI, продемонстровано бізнес-логіку та адміністративні можливості. Також показано роботу IoT-клієнта у Wokwi, який надсилає телеметрію на сервер, після чого дані обробляються бізнес-правилами, зберігаються у БД і доступні для перевірки через API. Отримані результати підтверджують коректну взаємодію компонентів і працездатність системи після розгортання.








ДОДАТОК А
Посилання на відео: https://youtu.be/OatWhKVM2LM
Посилання на гітхаб: https://github.com/NureTymbotaHlib/ark-pzpi-23-7-tymbota-hlib.git
